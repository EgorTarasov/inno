![img](landing.png)

# Система мониторинга города

Платформа для веб-мониторинга и управления городскими общественными пространствами и зелёными зонами. Данное приложение позволяет гражданам, модераторам и администраторам сообщать о происшествиях в общественных местах, управлять камерами наблюдения и генерировать официальные протоколы нарушений.

## Возможности

- **Аутентификация пользователей**: Безопасная система входа и регистрации с доступом, основанным на ролях (администратор, модератор, гражданин).
- **Панель управления**: Обзор событий и предупреждений в режиме реального времени.
- **Мониторинг камер**: Прямые трансляции с камер наблюдения по всему городу.
- **Управление оповещениями**: Создание, отслеживание и закрытие оповещений, поступающих из различных источников.
- **Сообщения о происшествиях**: Граждане могут отправлять отчёты о нарушениях или проблемах, требующих обслуживания.
- **Генерация протоколов**: Создание и экспорт официальных протоколов нарушений в формате PDF.
- **Обнаружение объектов**: Обнаружение объектов с помощью ИИ (TensorFlow и модель COCO-SSD).

## Технологический стек

- **Frontend**: Next.js 14, React 18, TypeScript
- **UI компоненты**: Tailwind CSS, shadcn/ui
- **Аутентификация**: NextAuth.js
- **База данных**: PostgreSQL с Drizzle ORM
- **Генерация PDF**: @react-pdf/renderer
- **Обнаружение объектов**: TensorFlow.js с моделью COCO-SSD
- **Графики и визуализация**: D3.js
- **Контейнеризация**: Docker

## Зависимости

- Node.js 18 или новее
- pnpm
- PostgreSQL база данных или Neon serverless PostgreSQL
- Docker и Docker Compose (опционально, для контейнерного деплоя)

## Начало работы

### Подготовка окружения

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/city-monitoring.git
cd city-monitoring
```

2. Установите зависимости:
```bash
pnpm install
```

3. Создайте файл `.env.local` в корневой директории со следующим содержимым:
```env
# База данных
DATABASE_URL=postgresql://username:password@localhost:5432/city_monitoring

# NextAuth
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_secret_key

# Прочие настройки
NEXT_PUBLIC_API_URL=http://localhost:3000/api
```

### Настройка базы данных

Настройте схему базы данных:
```bash
pnpm db:generate
pnpm db:push
```

(Опционально) Запустите Drizzle Studio для просмотра базы данных:
```bash
pnpm db:studio
```

## Запуск приложения

**Режим разработки**  
Запустите сервер разработки:
```bash
pnpm dev
```
Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000).

**Режим продакшн**
```bash
pnpm build
pnpm start
```

**Docker деплой**  
Проект включает конфигурацию Docker для простого деплоя:
```bash
docker compose up -d
```
Это запустит приложение Next.js и PostgreSQL внутри Docker-контейнеров.

## Структура проекта

- `/app`: Маршруты Next.js приложения и API эндпоинты
- `/components`: React компоненты
- `/lib`: Утилиты, настройка базы данных и общий код
- `/public`: Статические файлы
- `/hooks`: Пользовательские React хуки
- `/styles`: Глобальные стили и конфигурация Tailwind
- `/video`: Функциональность, связанная с видео

## Вклад в проект

1. Форкните репозиторий
2. Создайте новую ветку: `git checkout -b feature/your-feature-name`
3. Зафиксируйте изменения: `git commit -am 'Добавить новую функциональность'`
4. Отправьте ветку: `git push origin feature/your-feature-name`
5. Оформите pull request

## Лицензия

MIT License